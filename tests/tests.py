import logging
import pytest
from model import *

LOGGER = logging.getLogger(__name__)

EXAMPLE_STACKOVERFLOW_QUESTION = """If you have a java.io.InputStream object, how should you process that object and produce a String?

Suppose I have an InputStream that contains text data, and I want to convert it to a String, so for example I can write that to a log file.

What is the easiest way to take the InputStream and convert it to a String?"""

EXAMPLE_STACKOVERFLOW_CODE = """
int _tmain(int argc, _TCHAR* argv[])
{
	char name[64];
	printf("Enter your name: ");
	scanf("%s", name);
	Sanitize(name);
	printf("Welcome, %s!", name);
	return 0;
} }
"""

def test_setup():
    LOGGER.info("This is a test")
    print("This is a test, tetsing setup and loading of libraries")
    assert True

def test_tagging():
    tags_resp = find_tags(EXAMPLE_STACKOVERFLOW_QUESTION, None)
    print("Response from tagging: ", tags_resp)
    assert type(tags_resp.tags) == list and type(tags_resp.forwards) == list

def test_vulns():
    vulns_resp = find_vulns("Enter your stackoverflow question here", EXAMPLE_STACKOVERFLOW_CODE)
    print("Response from vulns: ", vulns_resp)
    assert type(vulns_resp.vulnerabilities) == list

def test_main():
    main_resp = call(EXAMPLE_STACKOVERFLOW_QUESTION, EXAMPLE_STACKOVERFLOW_CODE)
    print("Response from main: ", main_resp)
    assert type(main_resp.Tagging_Response.tags) == list and type(main_resp.Tagging_Response.forwards) == list and type(main_resp.Vulnerabilities_Response.vulnerabilities) == list