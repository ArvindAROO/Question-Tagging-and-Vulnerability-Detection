import dotenv
import os
import smtplib
import yagmail
dotenv.load_dotenv()
from_email_id = os.getenv('EMAIL_ID')
from_email_password = os.getenv('EMAIL_PASSWORD')


def send_email(email, subject, message):
    # print("email_id: ", from_email_id)
    # print("email_password: ", from_email_password)
    # email = list of all emails to be sent to
    yag =  yagmail.SMTP(from_email_id, from_email_password)
    yag.send(
        to=email,
        subject=subject,
        contents=message
    )
    print('Sent email successfully')
if __name__ == "__main__":
    send_email(
        email=[
            "anurag.khanra306@gmail.com",
            "i.arvindkrishna@gmail.com",
            "jeevansamrudh0707@gmail.com",
            "rmrahulmakhija74@gmail.com"
        ],
        subject="Forwarding mail to Top users",
        message="Hi, \n\nPlease find the question asked in the forum which could be relevant to you: \n" + "<Put question here>" + "\n\nThanks"
    )

# Example .env at root folder -> Capstone/.env
# EMAIL_ID=your_email_id
# EMAIL_PASSWORD=your_email_password or app password